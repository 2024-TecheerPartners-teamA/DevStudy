## 스프링 빈과 의존관계

**@Autowired란?** <br>
생성자에 `@Autowired`가 있으면 스프링이 연관된 객체를 스프링 컨테이너에서 찾아서 넣어준다. <br>
-> 이렇게 객체 의존관계를 외부에서 넣어주는 것을 **DI (Dependency Injection), 의존성 주입**이라 한다.

![image](https://github.com/smiinii/poto/blob/main/%EC%8A%A4%ED%94%84%EB%A7%81%20%EB%B9%88%20%EB%93%B1%EB%A1%9D%20%EC%95%88%EB%90%9C%20%EC%9D%B4%EB%AF%B8%EC%A7%80.png)
- 비고: memberController는 @Controller로 이미 등록했음.

위 사진처럼 스프링 빈을 등록하지 않으면 스프링 컨테이너 안에 MemberService가 들어가있지 않아 MemberController에서 Autowried를 해도 호출할 수 없다.
그래서 MemberService도 스프링 빈을 등록해야 된다.

---
**스프링 빈을 등록하는 2가지 방법**
1. 컴포넌트 스캔과 자동 의존관계 설정 (이게 @를 사용하는 거임.)
2. 자바 코드로 직접 스프링 빈 등록하기
---

### 1.컴포넌트 스캔과 자동 의존관계 설정

**컴포넌트 스캔 원리**
- @Component 애노테이션이 있으면 스프링 빈으로 자동 등록된다.
- @Controller 컨트롤러가 스프링 빈으로 자동 등록된 이유도 컴포넌트 스캔 때문이다.
- @Component 를 포함하는 다음 애노테이션도 스프링 빈으로 자동 등록된다. (원래 @Component로 해야되는데 밑에 3개도 @Component안에 있는 것들 이여서 가능.) <br>
    - @Controller
    - @Service
    - @Repository

+ 컴포넌트 스캔은 같은 패키지 안에서만 스캔하고 그 밖은 스캔을 안한다. (설정을 하면 할 수 있기는 함.)

![image](https://github.com/smiinii/poto/blob/main/%EC%8A%A4%ED%94%84%EB%A7%81%20%EB%B9%88%20%EB%93%B1%EB%A1%9D%20%EC%9D%B4%EB%AF%B8%EC%A7%80.png)
**참고**: 스프링은 스프링 컨테이너에 스프링 빈을 등록할 때, 기본으로 싱글톤으로 등록한다(유일하게 하나만
등록해서 공유한다) 따라서 같은 스프링 빈이면 모두 같은 인스턴스다. 설정으로 싱글톤이 아니게 설정할 수 있지
만, 특별한 경우를 제외하면 대부분 싱글톤을 사용한다.

위 사진처럼 스프링 빈에 등록을 하면 스프링 컨테이너에 3개가 모두 들어가고 
1. MemberController에서 MemberService를 Autowried 후 MemberService를 호출하고 
2. MemberService에서 MemberMemoryRepository를 Autowried 후 MemberMemoryRepository를 호출하고
3. MemberMemoryRepository가 작동한 후 
4. MemberService에 MemberMemoryRepository가 주입되고 MemberService가 작동 후
5. MemberController에 MemberService가 주입되고 MemberController가 작동


- MemberController 코드
```
package hello.hello_spring.controller;

import hello.hello_spring.service.MemberService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;

@Controller
public class MemberController {

    private final MemberService memberService;

    @Autowired
    public MemberController(MemberService memberService) {
        this.memberService = memberService;
    }
}
```

### 2.자바 코드로 직접 스프링 빈 등록하기




